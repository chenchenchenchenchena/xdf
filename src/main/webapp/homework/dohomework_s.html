<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>做作业</title>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="full-screen" content="yes"/>
    <link rel="stylesheet" href="../common/css/base.css"/>
    <link rel="stylesheet" href="css/dohomework_s.css"/>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
    <script src="common/js/zepto.min.js"></script>
    <script src="common/js/ajax.js"></script>
    <script src="../common/js/jquery.js"></script>
    <script src="../common/js/scale.js"></script>
    <script src="../common/js/layer.js"></script>
</head>
<body>
<div class="doHomework">
    <div class="hwRankTitle">作业排行榜</div>
    <div class="hwInfo">
        <div class="infoTitle">作业信息</div>
        <div class="kon">
            <p class="sTitle">知识点</p>
            <p>等腰直角三角形</p>
        </div>
        <div class="des">
            <p class="sTitle">作业描述</p>
            <p class="hwCon">如图，点E为正方形ABCD的边CD上的一点，点F为CB的延长线上的一点，且EA垂直AF,求证：DE=BF.</p>
        </div>
        <div>
            <div id="audio" src=""></div>
            <div class="imgBox">
                <div><img src="images/B02-23_03.png" alt=""/></div>
                <div><img src="images/B02-23_03.png" alt=""/></div>
                <div><img src="images/B02-23_03.png" alt=""/></div>
            </div>
        </div>
    </div>
    <div class="answer">
        <div class="infoTitle">我的答案</div>
        <p class="sTitle dh">写作业</p>
        <textarea class="teBox" placeholder="请输入作业答案或点击一下按钮上传答案图片、语音" maxlength="200"></textarea>
        <p class="word"><span>0</span>/<span>200</span>
        <div class="clickImg">
            <img id="chooseImage" src="images/B02-2_10.png"/><img id="record" src="images/B02-2_12.png"/>
        </div>
        <div class="notsubmit" style="display: none;">
            <div id="audio" src=""></div>
            <div class="imgBox">
                <div><span class="stuImg"></span><img src="images/B02-23_03.png" alt=""/></div>
                <div><span class="stuImg"></span><img src="images/B02-23_03.png" alt=""/></div>
                <div><span class="stuImg"></span><img src="images/B02-23_03.png" alt=""/></div>
            </div>
        </div>
        <button class="btn">提交</button>
    </div>
    <div class="hmAnswer" style="display: none;">
        <div class="infoTitle">作业答案</div>
        <div class="anDes">答:点E为正方形ABCD的边CD上的一点，点F为CB的延长线上的一点，且EA垂直AF,求证：DE=BF.</div>
        <div>
            <div id="audio" src=""></div>
            <div class="imgBox">
                <div><img src="images/B02-23_03.png" alt=""/></div>
                <div><img src="images/B02-23_03.png" alt=""/></div>
                <div><img src="images/B02-23_03.png" alt=""/></div>
            </div>
        </div>
    </div>
    <div class="comment" style="display: none;">
        <div class="infoTitle">老师批注</div>
        <div class="anDes">点E为正方形ABCD的边CD上的一点，点F为CB的延长线上的一点，且EA垂直AF,求证：DE=BF.</div>
        <div>
            <div id="audio" src=""></div>
            <div class="imgBox">
                <div><img src="images/B02-23_03.png" alt=""/></div>
                <div><img src="images/B02-23_03.png" alt=""/></div>
                <div><img src="images/B02-23_03.png" alt=""/></div>
            </div>
        </div>
    </div>
</div>
<!--<div id="alert">超出字符上限！</div>-->
<!--<div class="submitBox"><img src="images/tan.png" /><p>作业提交成功</p><button>确定</button></div>-->
<!--<div class="submitFail"><img src="images/redtan.png" /><p>作业提交失败</p><button>取消</button><button>重试</button></div>-->
</body>
<!--<script src="js/homeworklist_s.js"></script>-->
</html>
<script type="text/javascript">
    $(function () {
        var Wxconfig =  {"url" :location.href,"appid" : "wx559791e14e9ce521","secret": "baa4373d5a8750c69b9d1655a2e31370"};
        var Wxconfig_h;
        $.ajax({
            url: url.w_xmor,
            type: 'post',
            dataType: 'json',
            asyns:false,
            data: JSON.stringify(Wxconfig),
            success:function(e){
                // console.log(e)
                Wxconfig_h = e;
                // console.log(Wxconfig_h.timestamp);
                //配置
                wx.config({
                    debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
                    appId: Wxconfig.appid,   // 必填，公众号的唯一标识
                    timestamp: Wxconfig_h.timestamp,   // 必填，生成签名的时间戳
                    nonceStr: Wxconfig_h.nonceStr,   // 必填，生成签名的随机串
                    signature: Wxconfig_h.signature, // 必填，签名
                    jsApiList: ["startRecord","chooseImage","stopRecord","uploadVoice","playVoice","downloadVoice"]
                });
                //调用成功
                wx.ready(function(){
                    wx.checkJsApi({
                        jsApiList: ["startRecord","chooseImage","stopRecord","uploadVoice","playVoice","downloadVoice"],
                        success:function(res){
                        }
                    })

                });
                //调用失败
                wx.error(function(res){
                    alert("出错了"+res.errMsg)
                });

            }
        });
        //点击选择图片
        $('#chooseImage').click(function () {
            console.log("8990---");
            wx.chooseImage({
                success: function (res) {
                    $('.notsubmit').show();
                    if ($('#audio').attr("src") == undefined) {
                        $('#audio').hide();
                    }
                    var str = "";
                    if (res.localIds.length > 0) {

                        for (var i = 0; i < res.localIds.length; i++) {

                            if (i % 3 == 0) {
                                str += " <div class = 'imgBox'>";
                            }
                            str += "<div><span class='stuImg'>" + "</span><img src=" + res.localIds[i] + "/></div>";
                            if ((i + 1) % 3 == 0 || i == res.localIds.length - 1) {
                                str += "</div>";
                            }
                        }
                    }
                    alert('已选择 ' + res.localIds.length + ' 张图片');
                }
            });
        });
    });
    /*layer.open({
     type: 1,
     area: ['310px', '195px'],
     shade: false,
     title: false,
     skin: 'yourclass',
     content:$("#alert")
     });
     layer.open({
     type: 1,
     area: ['548px', '345px'],
     shade:[0.2,'#000'],
     title:'',
     skin: '',
     content:$(".submitBox")
     });*/
    /*layer.open({
     type: 1,
     area: ['548px', '345px'],
     shade:[0.2,'#000'],
     title:'',
     skin: '',
     content:$(".submitFail")
     })*/
</script>

