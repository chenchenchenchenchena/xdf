<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>视频</title>
    <link rel="stylesheet" href="../css/core.css" />
    <link rel="stylesheet" href="../css/addInfo.css" />
    <script src="../js/jquery.js"></script>
    <script src="../js/layer-v2.1/layer/layer.js"></script>
</head>
<body>
<div class="startImg"><img src="../images/01.png"  /></div>
<div class="video" style="display:none">
    <video src="" autoplay></video>
</div>
<script>
    var str = "";
   setInterval(function () {
        /* str = "";*/
        $.ajax({
            url: "http://dt.staff.xdf.cn/xdfdtmanager/videofile/getPlayInformation.do",
            type: 'get',
            dataType: 'json',
            success:function (e) {
                if(e.result){
                    $(".startImg").hide();
                    $(".video").show();
                    var dataList = e.dataList;
                    for (var i = 0; i < dataList.length; i++) {
                        var grade = dataList[i]["grade"];
                        var lessonNo = dataList[i]["lessonNo"];
                        var subject = dataList[i]["subject"];
                        var teacherName = dataList[i]["teacherName"];
                        /*var schoolName = dataList[i]["schoolName"];*/
                        var studioNo = dataList[i]["studioNo"];
                        var learningPeriod = dataList[i]["learningPeriod"];
                        var courseName = dataList[i]["courseName"];
                        /* var fileUrl = dataList[i]["fileUrl"];*/

                        str += "直播间" + studioNo + "/" + teacherName + "/" + learningPeriod + "/" + grade + "/" + courseName + "/" + subject + "/" + lessonNo + "讲---";

                    }
                    console.log(str);
                }else{
                    layer.msg(e.message,{icon:1});
                }

            }
        })
     },10000);
    var playerId = 0;
    window.onload=function () {
        createNativeBridge(function (bridge) {
            window.nativeBridge = bridge;
            nativeBridge.getVideoDemandPath(str, function (args) {
                myLog(JSON.stringify(args));
            });
        })
    }
    function myLog(log) {
       /* document.getElementById("txt-area").value += log + "\n";*/
        console.log("nihao....................");
    }



</script>
</body>
</html>